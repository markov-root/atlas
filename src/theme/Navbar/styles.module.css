/* src/theme/Navbar/styles.module.css - Mobile compatibility improvements */

.navbarContainer {
  position: relative;
}

.settingsButton {
  /* Style as a navbar item */
  background: transparent;
  border: none;
  color: var(--atlas-text-secondary, #6c757d);
  cursor: pointer;
  padding: var(--ifm-navbar-item-padding-vertical, 0.25rem) var(--ifm-navbar-item-padding-horizontal, 0.75rem);
  border-radius: var(--ifm-button-border-radius, 0.375rem);
  transition: all 0.2s ease;
  
  display: flex;
  align-items: center;
  justify-content: center;
  
  /* Match navbar link styling */
  text-decoration: none;
  font-weight: var(--ifm-font-weight-normal, 400);
  
  /* Ensure it's clickable on mobile */
  min-width: 44px;
  min-height: 44px;
  
  /* Prevent text selection on mobile */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  
  /* Prevent double-tap zoom on mobile */
  touch-action: manipulation;
}

.settingsButton:hover {
  background: rgba(var(--atlas-primary-rgb, 25, 113, 194), 0.1);
  color: var(--atlas-primary, #1971c2);
}

.settingsButton:focus {
  outline: 2px solid var(--atlas-primary, #1971c2);
  outline-offset: 2px;
}

/* Mobile specific styles */
@media (max-width: 768px) {
  .settingsButton {
    /* Larger touch target for mobile */
    min-width: 48px;
    min-height: 48px;
    padding: 0.5rem;
  }
  
  /* Ensure the icon is visible on mobile */
  .settingsIcon {
    width: 22px !important;
    height: 22px !important;
  }
}

/* Style the SVG icon - Light mode */
.settingsIcon {
  filter: none;
  opacity: 0.7;
  transition: all 0.2s ease;
  width: 20px;
  height: 20px;
  display: block;
  pointer-events: none; /* Prevent icon from blocking clicks */
}

.settingsButton:hover .settingsIcon {
  opacity: 1;
  /* Apply primary color filter on hover - light mode */
  filter: brightness(0) saturate(100%) invert(27%) sepia(94%) saturate(1167%) hue-rotate(201deg) brightness(96%) contrast(94%);
}

/* Dropdown container - improved mobile positioning */
.dropdownContainer {
  position: fixed;
  top: var(--ifm-navbar-height, 60px);
  right: 1rem;
  z-index: 9999;
}

/* Mobile-specific dropdown positioning */
@media (max-width: 768px) {
  .dropdownContainer {
    right: 0.5rem;
    left: 0.5rem;
    /* On mobile, make dropdown full-width minus margins */
    width: auto;
  }
}

@media (max-width: 480px) {
  .dropdownContainer {
    right: 0.25rem;
    left: 0.25rem;
    top: calc(var(--ifm-navbar-height, 60px) + 0.5rem);
  }
}

/* Dark mode styles */
[data-theme='dark'] .settingsButton {
  color: var(--atlas-text-secondary, #adb5bd);
}

[data-theme='dark'] .settingsButton:hover {
  background: rgba(var(--atlas-primary-rgb, 51, 154, 240), 0.15);
  color: var(--atlas-primary-lighter, #74c0fc);
}

[data-theme='dark'] .settingsButton:focus {
  outline-color: var(--atlas-primary-lighter, #74c0fc);
}

/* Dark mode icon styling - make icon pure white */
[data-theme='dark'] .settingsIcon {
  filter: invert(1);
  opacity: 0.8;
}

[data-theme='dark'] .settingsButton:hover .settingsIcon {
  opacity: 1;
  /* Keep white on hover in dark mode, or use primary color */
  filter: brightness(0) saturate(100%) invert(67%) sepia(32%) saturate(1715%) hue-rotate(191deg) brightness(101%) contrast(94%);
}

/* Force visibility on problematic mobile browsers */
.settingsButton,
.settingsIcon {
  visibility: visible !important;
  display: flex !important;
}

/* Improve button rendering on Android browsers */
.settingsButton {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-clip: padding-box;
}

/* Ensure dropdown is above mobile keyboards */
@media (max-height: 500px) {
  .dropdownContainer {
    top: 0.5rem;
    max-height: calc(100vh - 1rem);
    overflow-y: auto;
  }
}
