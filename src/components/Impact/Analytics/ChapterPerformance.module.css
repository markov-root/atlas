/* src/components/Impact/Analytics/ChapterPerformance.module.css */

.performanceContainer {
  width: 100%;
  margin: 3rem 0;
  padding: 0;
  background: transparent;
}

.noData {
  text-align: center;
  padding: 3rem;
  color: var(--atlas-text-secondary, #6c757d);
  font-size: 1rem;
}

/* Header */
.header {
  text-align: center;
  margin-bottom: 2rem;
}

.sectionTitle {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--atlas-text, #212529);
  margin: 0 0 0.5rem 0;
  font-family: var(--atlas-font-heading, 'Inter', sans-serif);
}

.subtitle {
  font-size: 0.9375rem;
  color: var(--atlas-text-secondary, #6c757d);
  font-weight: 500;
}

[data-theme='dark'] .sectionTitle {
  color: var(--atlas-text, #e9ecef);
}

[data-theme='dark'] .subtitle {
  color: var(--atlas-text-secondary, #adb5bd);
}

/* Compact Table Header */
.tableHeader {
  display: grid;
  grid-template-columns: 40px 1fr 110px 120px 80px 100px;
  gap: 0.75rem;
  padding: 0.75rem 0;
  align-items: center;
  font-weight: 600;
  font-size: 0.8125rem;
  color: var(--atlas-text-secondary, #6c757d);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  background: transparent;
}

[data-theme='dark'] .tableHeader {
  color: var(--atlas-text-secondary, #adb5bd);
}

.expandCol,
.chapterCol,
.readersCol,
.engagementCol,
.ratingCol,
.understandingCol {
  text-align: center;
  display: flex;
  justify-content: center;
  align-items: center;
}

.chapterCol {
  text-align: left;
  justify-content: flex-start;
}

/* Seamless Chapter List */
.chaptersList {
  display: flex;
  flex-direction: column;
  background: transparent;
}

.chapterGroup {
  background: transparent;
}

.chapterRow,
.sectionRow {
  display: grid;
  grid-template-columns: 40px 1fr 110px 120px 80px 100px;
  gap: 0.75rem;
  padding: 0.75rem 0;
  align-items: center;
  transition: background-color 0.1s ease;
  cursor: default;
  background: transparent;
  /* NO border-bottom lines for clean look */
}

.chapterRow.clickable {
  cursor: pointer;
}

.chapterRow:hover {
  background-color: var(--atlas-background-alt, #f8f9fa);
}

[data-theme='dark'] .chapterRow:hover {
  background-color: var(--atlas-background-alt, #1e1e1e);
}

/* Section Row Styling */
.sectionRow {
  background: var(--atlas-background-alt, #f8f9fa);
  padding: 0.5rem 0;
  /* NO border-bottom for clean look */
}

[data-theme='dark'] .sectionRow {
  background: var(--atlas-background-alt, #1e1e1e);
}

/* Compact Expand Button */
.expandCell {
  display: flex;
  justify-content: center;
  align-items: center;
}

.expandBtn {
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 0.25rem;
  border-radius: 4px;
  color: var(--atlas-text-secondary, #6c757d);
  transition: color 0.1s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.expandBtn:hover {
  color: var(--atlas-primary, #1971c2);
}

[data-theme='dark'] .expandBtn {
  color: var(--atlas-text-secondary, #adb5bd);
}

[data-theme='dark'] .expandBtn:hover {
  color: var(--atlas-primary-lighter, #74c0fc);
}

/* Compact Chapter Info */
.chapterCell {
  display: flex;
  align-items: center;
  min-width: 0;
}

.chapterInfo {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  width: 100%;
}

.chapterNumber {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  background: var(--atlas-primary, #1971c2);
  color: #ffffff;
  border-radius: 6px;
  font-size: 0.8125rem;
  font-weight: 600;
  font-family: var(--atlas-font-mono, 'JetBrains Mono', monospace);
  flex-shrink: 0;
}

[data-theme='dark'] .chapterNumber {
  background: var(--atlas-primary-lighter, #74c0fc);
  color: var(--atlas-text, #212529);
}

.chapterName {
  font-size: 0.9375rem;
  font-weight: 600;
  color: var(--atlas-text, #212529);
  margin: 0;
  line-height: 1.2;
  flex: 1;
  min-width: 0;
}

[data-theme='dark'] .chapterName {
  color: var(--atlas-text, #e9ecef);
}

/* Section Info (for expanded sections) */
.sectionInfo {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  width: 100%;
  padding-left: 1rem; /* Indent sections under chapters */
}

.sectionNumber {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background: var(--atlas-gray-200, #e9ecef);
  color: var(--atlas-text, #212529);
  border-radius: 4px;
  font-size: 0.6875rem;
  font-weight: 600;
  font-family: var(--atlas-font-mono, 'JetBrains Mono', monospace);
  flex-shrink: 0;
}

[data-theme='dark'] .sectionNumber {
  background: var(--atlas-gray-700, #495057);
  color: var(--atlas-text, #e9ecef);
}

.sectionName {
  font-size: 0.8125rem;
  font-weight: 500;
  color: var(--atlas-text, #212529);
  margin: 0;
  line-height: 1.2;
  flex: 1;
  min-width: 0;
}

[data-theme='dark'] .sectionName {
  color: var(--atlas-text, #e9ecef);
}

/* Simple Readers Count */
.readersCell {
  display: flex;
  justify-content: center;
  align-items: center;
}

.readersCount {
  font-size: 0.8125rem;
  font-weight: 600;
  color: var(--atlas-text, #212529);
}

[data-theme='dark'] .readersCount {
  color: var(--atlas-text, #e9ecef);
}

/* Simple Engagement Bar */
.engagementCell {
  display: flex;
  justify-content: center;
  align-items: center;
}

.engagementBar {
  position: relative;
  width: 110px;
  height: 24px;
  background: var(--atlas-background-alt, #f1f3f5);
  border-radius: 4px;
  overflow: hidden;
}

[data-theme='dark'] .engagementBar {
  background: var(--atlas-background-alt, #2c2c2c);
}

.engagementBarFill {
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  background: var(--atlas-primary-light, #339af0);
  border-radius: 4px;
  transition: width 0.2s ease;
  min-width: 1px;
}

[data-theme='dark'] .engagementBarFill {
  background: var(--atlas-primary-light, #339af0);
}

.engagementScore {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.6875rem;
  font-weight: 600;
  color: var(--atlas-text, #212529);
  z-index: 1;
}

[data-theme='dark'] .engagementScore {
  color: var(--atlas-text, #e9ecef);
}

/* Compact Metric Cells - BACK TO ORIGINAL SIMPLE APPROACH */
.ratingCell,
.understandingCell {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.125rem;
}

.metricValue {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  font-size: 0.8125rem;
  font-weight: 600;
  color: var(--atlas-text, #212529);
}

[data-theme='dark'] .metricValue {
  color: var(--atlas-text, #e9ecef);
}

.metricIcon {
  opacity: 0.7;
  flex-shrink: 0;
}

.comingSoonIcon {
  width: 16px;
  height: 16px;
  opacity: 0.4;
}

[data-theme='dark'] .comingSoonIcon {
  filter: brightness(0) invert(1);
}

.feedbackCount {
  font-size: 0.6875rem;
  color: var(--atlas-text-secondary, #6c757d);
  font-weight: 400;
}

[data-theme='dark'] .feedbackCount {
  color: var(--atlas-text-secondary, #adb5bd);
}

/* Sections Container - Clean, no borders */
.sectionsContainer {
  /* Remove all styling - sections are individual rows */
}

/* Data Source Note */
.explanationNote {
  text-align: center;
  padding: 1rem;
  background: transparent;
  font-size: 0.8125rem;
  line-height: 1.5;
  color: var(--atlas-text-secondary, #6c757d);
  margin-top: 1.5rem;
  opacity: 0.8;
}

[data-theme='dark'] .explanationNote {
  color: var(--atlas-text-secondary, #adb5bd);
}

.explanationNote strong {
  color: var(--atlas-text, #212529);
  font-weight: 600;
}

[data-theme='dark'] .explanationNote strong {
  color: var(--atlas-text, #e9ecef);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .tableHeader,
  .chapterRow,
  .sectionRow {
    grid-template-columns: 1fr;
    gap: 0.5rem;
  }
  
  .tableHeader {
    display: none; /* Hide header on mobile */
  }
  
  .chapterRow,
  .sectionRow {
    display: flex;
    flex-direction: column;
    padding: 1rem;
    gap: 0.75rem;
  }
  
  .expandCell {
    order: -1;
    align-self: flex-start;
  }
  
  .chapterCell {
    order: 0;
  }
  
  .readersCell,
  .engagementCell,
  .ratingCell,
  .understandingCell {
    order: 1;
    width: 100%;
    justify-content: flex-start;
  }
  
  .engagementBar {
    width: 100%;
  }
  
  .sectionInfo {
    padding-left: 0.5rem; /* Less indent on mobile */
  }
}
